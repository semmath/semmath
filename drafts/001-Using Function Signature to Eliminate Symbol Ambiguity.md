---
title: Using Function Signature to Eliminate Symbol Ambiguity
author: 青羽
date: 2024.11.24
version: 0.2.0
state: draft
---

# 现状

$\sin^{-1}(x)$ 是表示 $\frac{1}{sin(x)}$ 还是 $\arcsin(x)$ 呢？（x 的类型是一个实数，sin，arcsin 是函数名，下同）

没有标准答案。表示什么取决于不同的上下文，这有点像编程语言中的多态，但又不是真正的多态。真正的多态是可以通过规则分析明确语义的。但是数学里的 $\sin^{-1}(x)$ 在不提供上下文之前无法确定其意义，就算提供了上下文也不一定能自洽，比如根据上下文解释说这里是反函数，那么 $\sin^{2}(x)$ 通常又解释成幂了，这里就出现了矛盾：$\sin^{2}(x)$ 的作用就像求 $\sin(x)$ 的值平方，但是 $\sin^{-1}(x)$ 的作用就像 $\arcsin(x)$。同是实数类型，在同一个位置上说明语义应该是一致的，但是 -1 表示反函数，2 就表示幂，这很矛盾并且不自洽。类似的例子不胜枚举。

# 解决方案

$\sin(x)$ 通常值域是实数域，针对一个函数 $pow()$ ，这个函数的参数是两个实数 $x$ 和 $y$ ，作用是得到 $x^y$ 也就是 $x$ 的 $y$ 次幂，那么 $pow(\sin(x), -1)$ 就应该写成 $(\sin(x))^{-1}$ ，表示的是 $\sin(x)$ 的 $-1$ 次幂。

至于 $\sin^{-1}(x)$ ，解释成 $\arcsin(x)$ 当然可以而且有意义，但是重点是要统一，所以在这种语义下 $\sin^{2}(x)$ 就应该表示 $\sin(\sin(x))$ ，因为这种语义下的角标数字代表的是对函数本身的复合操作而不是对函数值的平方。

本质上，角标的位置代表了函数参数的位置，角标上的那个数代表了函数参数的类型，函数名称、函数参数的位置（个数）和其对应的类型共同构成函数签名，而函数签名是唯一决定该函数语义的东西。
